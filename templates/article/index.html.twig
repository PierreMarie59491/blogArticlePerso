{% extends 'base.html.twig' %} {% block title %}Article index{% endblock %} {%
block body %}
<h1>Bienvenu sur le blog</h1>
{% if app.user == null %} 
Veuillez vous connecter pour publier un article ! 
{% else %}
<h1>{{app.user.prenom}} {{app.user.nom}} !!!</h1>
{% endif %}
{% if articles == null %}
<tr>
    <td colspan="6">Aucun article publié</td>
</tr>

{% else %}

<div class="row g-3">
  {% for article in articles %}
  <div class="col-md-5">
    <div class="card mb-3" style="max-width: 540px;min-width:500px;">
        <div class="row g-0">
          <div class="col-md-4">
            {% if article.image %}
            <a href="{{ path('app_article_show', { id: article.id }) }}">
                <img src="{{ asset('images/articles/')}}{{article.image}}" width="150" height="170" alt="..."></a>
            {% else %}
            <a href="{{ path('app_article_show', { id: article.id }) }}">
            <img src="https://img.freepik.com/vecteurs-premium/vecteur-icone-image-par-defaut-page-image-manquante-pour-conception-site-web-application-mobile-aucune-photo-disponible_87543-11093.jpg"  height="170" width="150"  alt="..."></a>
            {% endif %}
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title">{{article.titre}}</h5>
              <p class="card-text">{{article.resume}}</p>
              <p class="card-text">
                {% if article.user %}
                Par {{article.user.prenom}}
                {% else %}
                Par Auteur inconnu
                {% endif %}
                 le {{ article.createdAt ? article.createdAt|date('d-m-Y') : '' }}</p>
              {# <p class="card-text">{{article.user}}</p> #}
              <tr>
                <td>
                    <a href="{{ path('app_article_edit', { id: article.id }) }}"
                      ><img src="{{ asset('images/articles/modifier.png')}}" width="100" height="120" alt=""></a
                    >
                  </td>
              </tr>
            </div>
          </div>
        </div>
      </div>
  </div>
  {% endfor %}
  {% endif %}
</div>
{% if app.user %}
    <a href="{{ path('app_article_new') }}"><img src="{{ asset('images/articles/blogIt.png')}}" width="150" height="170" alt="...">
Créer un nouvel article</a>

{% endif %}

{# display navigation #}
<div class="navigation">
    {{ knp_pagination_render(articles) }}
</div>

 {% endblock %} 
